var X=Object.defineProperty,Y=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var w=(e,a,r)=>a in e?X(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,f=(e,a)=>{for(var r in a||={})ee.call(a,r)&&w(e,r,a[r]);if(b)for(var r of b(a))te.call(a,r)&&w(e,r,a[r]);return e},H=(e,a)=>Y(e,Z(a));function y(e,a={}){return new CustomEvent(e,{detail:a})}function O(){return y("showOverflow")}function I(){return y("hideOverflow")}function $({overflowCount:e}){return y("itemsChanged",{overflowCount:e})}function P({original:e}){return y("toggleClicked",{original:e})}function ne(){let{port1:e}=new MessageChannel;return{addEventListener:e.addEventListener.bind(e),dispatchEvent:e.dispatchEvent.bind(e),removeEventListener:e.removeEventListener.bind(e)}}var x=ne;function re(){let e={eventReady:!1},a=x(),r=new Map;function s(m,p,i=!0){function d(M){(!i||e.eventReady)&&p(M)}return r.set(p,{eventType:m,wrappedCallback:d}),a.addEventListener(m,d),this}function c(m,p){let{wrappedCallback:i}=r.get(p);return a.removeEventListener(m,i),this}function v(m){a.dispatchEvent(m)}function n(m=!0){e.eventReady=m}return{off:c,on:s,setEventReady:n,trigger:v}}var k=re;function ae(){let e=new WeakMap;return function(r,s){return e.get(r)||e.set(r,new Map(Array.from(r).reduce((c,v,n)=>c.concat([[v,s[n]]]),[]))),e.get(r)}}var B=ae;function le(e,a={}){return typeof e=="string"?e:e(a)}var N=le;function ie(e){if(e&&e.length)throw new Error(`
- ${e.join(`
- `)}`)}function oe(e){return[!(e instanceof Element)&&"Target must be an HTMLElement.",(!e.children||!e.children.length)&&"Target must be the direct parent of the individual nav items."].filter(Boolean)}function se(e,a){return Object.keys(e).map(r=>typeof a[r]=="undefined"?`Unrecognised option: ${r}`:void 0).filter(Boolean)}function ce(e,a,r){return[...oe(e),...se(a,r)]}function ve(e,a,r){ie(ce(e,a,r))}var A=ve;var L={classNames:{["container"]:["p-plus-container"],["main"]:["p-plus"],["primary-nav-wrapper"]:["p-plus__primary-wrapper"],["primary-nav"]:["p-plus__primary"],["overflow-nav"]:["p-plus__overflow"],["toggle-btn"]:["p-plus__toggle-btn"],["nav-item"]:["p-plus__primary-nav-item"]},collapseAtCount:-1,openOnToggle:!0,defaultOverflowVisible:!1,innerToggleTemplate:"More"};function me(e,a={}){let r=H(f(f({},L),a),{classNames:f(f({},L.classNames),a.classNames)}),{classNames:s}=r,c=k(),v={eventListeners:new Map,itemMap:new WeakMap},n={clone:{},primary:{}},m=B();function p(t){return s[t].join(" ")}function i(t){return`data-${t}`}function d(){return`
      <div ${i("main")} class="${p("main")}">
        <div class="${p("primary-nav-wrapper")}" ${i("primary-nav-wrapper")}></div>
        <button
          ${i("toggle-btn")}
          class="${p("toggle-btn")}"
          aria-expanded="false"
        >${N(r.innerToggleTemplate)}</button>
        <${e.tagName}
          ${i("overflow-nav")}
          class="${p("overflow-nav")}"
          aria-hidden="true"
        >
        </${e.tagName}>
      </div>
    `}function M(t){let l=t.cloneNode(!0);return S(l),Array.from(l.children).forEach(R),l}function S(t){t.classList.add(...s["primary-nav"]),t.setAttribute(i("primary-nav"),"")}function R(t){t.classList.add(...s["nav-item"]),t.setAttribute(i("nav-item"),"")}function W(){let{itemMap:t}=v,l=d(),o=document.createElement("div");o.classList.add(...s["container"]),o.setAttribute(i("container"),"true"),n["container"]=o;let E=document.createRange().createContextualFragment(l);n.primary["primary-nav-wrapper"]=E.querySelector(`[${i("primary-nav-wrapper")}]`),n.primary["primary-nav-wrapper"].appendChild(M(e));let g=E.cloneNode(!0);n.primary["main"]=E.querySelector(`[${i("main")}]`),n.primary["primary-nav"]=E.querySelector(`[${i("primary-nav")}]`),n.primary["nav-item"]=Array.from(E.querySelectorAll(`[${i("nav-item")}]`)),n.primary["overflow-nav"]=E.querySelector(`[${i("overflow-nav")}]`),n.primary["toggle-btn"]=E.querySelector(`[${i("toggle-btn")}]`),n.clone["main"]=g.querySelector(`[${i("main")}]`),n.clone["nav-item"]=Array.from(g.querySelectorAll(`[${i("nav-item")}]`)),n.clone["toggle-btn"]=g.querySelector(`[${i("toggle-btn")}]`),n.clone["main"].setAttribute("aria-hidden","true"),n.clone["main"].setAttribute("data-clone","true"),n.clone["main"].classList.add(`${s["main"][0]}--clone`),n.clone["main"].classList.add(`${s["main"][0]}--${"is-showing-toggle"}`),o.appendChild(E),o.appendChild(g),n.clone["nav-item"].forEach(Q=>t.set(Q,"primary-nav")),e.parentNode.replaceChild(o,e)}function j(t=!0){n.primary["main"].classList[t?"add":"remove"](`${s["main"][0]}--${"is-showing-toggle"}`),typeof r.innerToggleTemplate!="string"&&[n.primary["toggle-btn"],n.clone["toggle-btn"]].forEach(l=>{l.innerHTML=N(r.innerToggleTemplate,{toggleCount:n.primary["overflow-nav"].children.length,totalCount:n.clone["nav-item"].length})})}function T(t){let{itemMap:l}=v;return n.clone["nav-item"].filter(o=>l.get(o)===t)}function V(t){let{collapseAtCount:l}=r;if(t==="primary-nav"||l<0)return T(t);let o=T("primary-nav").length;return o>0&&o<=l?n.clone["nav-item"]:T(t)}function _(t){let l=n.primary[t].cloneNode();return V(t).forEach(o=>{let E=m(n.clone["nav-item"],n.primary["nav-item"]).get(o);l.appendChild(E)}),l}function q(t){let l=_(t);n.primary[t].parentNode.replaceChild(l,n.primary[t]),n.primary[t]=l}function D({target:t,intersectionRatio:l}){v.itemMap.set(t,l<.99?"overflow-nav":"primary-nav")}function F(t){t.forEach(D),["primary-nav","overflow-nav"].forEach(q),c.trigger($({overflowCount:n.primary["overflow-nav"].children.length})),c.setEventReady(!0)}function u(t=!0){let l=`${s["main"][0]}--${"is-showing-overflow"}`;return n.primary["main"].classList[t?"add":"remove"](l),n.primary["overflow-nav"].setAttribute("aria-hidden",t?"false":"true"),n.primary["toggle-btn"].setAttribute("aria-expanded",t?"true":"false"),c.trigger(t?O():I()),this}function h(){let t=`${s["main"][0]}--${"is-showing-overflow"}`;return u(!n.primary["main"].classList.contains(t)),this}function U(t=!0){let l=`${s["main"][0]}--${"is-hiding-primary"}`;n.primary["main"].classList[t?"add":"remove"](l),n.primary["primary-nav"].setAttribute("aria-hidden",String(t))}function C(t){t.preventDefault(),c.trigger(P({original:t}))}function z({detail:{overflowCount:t}={}}){j(t>0),t===0&&u(!1),U(t===n.clone["nav-item"].length)}function G(){return f({},n.primary)}function J(){v.observer=new IntersectionObserver(F,{root:n.clone["main"],rootMargin:"0px 0px 0px 0px",threshold:[.99]}),n.clone["nav-item"].forEach(t=>v.observer.observe(t)),n.primary["toggle-btn"].addEventListener("click",C),c.on("itemsChanged",z,!1),r.openOnToggle&&c.on("toggleClicked",h,!1)}function K(){v.observer&&v.observer.disconnect(),n.primary["toggle-btn"].removeEventListener("click",C),Array.from(v.eventListeners.entries()).forEach(([l,{eventType:o}])=>{c.off(o,l)}),n["container"].parentNode.replaceChild(e,n["container"])}return function(){A(e,a,L),W(),J(),r.defaultOverflowVisible&&u(!0)}(),{destroy:K,getNavElements:G,off:c.off,on:c.on,setOverflowNavOpen:u,toggleOverflowNav:h}}var He=me;export{He as default};
